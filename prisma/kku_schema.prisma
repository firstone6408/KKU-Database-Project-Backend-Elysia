generator client {
    provider = "prisma-client-js"
    output   = "./generated/kku_client"
}

datasource db {
    provider = "mysql"
    url      = env("KKU_DATABASE_URL")
}

enum UserRole {
    ADMIN
    MANAGER
    STAFF
}

enum UserStatus {
    ACTIVE
    INACTIVE
    SUSPENDED
}

model Branch {
    id          Int    @id @default(autoincrement())
    branchCode  String @unique
    name        String @unique
    phoneNumber String
    address     String

    User User[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model User {
    id           Int        @id @default(autoincrement())
    username     String     @unique
    email        String     @unique
    password     String
    name         String
    profileImage String?
    phoneNumber  String?
    role         UserRole
    status       UserStatus @default(ACTIVE)
    lastLogin    DateTime?
    branchId     Int?
    branch       Branch?    @relation(fields: [branchId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
